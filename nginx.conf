server {
    listen 80;
    
    location / {
        root /usr/share/nginx/html;
        try_files $uri $uri/ /index.html;
        
        # Важные MIME-типы для Blazor WASM
        types {
            application/wasm wasm;
            application/octet-stream dll;
            application/javascript js;
            text/html html;
        }
    }

    # Правильное обслуживание файлов .wasm и .dll
    location /_framework/ {
        alias /usr/share/nginx/html/_framework/;
        types {
            application/wasm wasm;
            application/octet-stream dll;
        }
        add_header Cache-Control "public, max-age=31536000, immutable";
    }
}